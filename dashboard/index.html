<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STUART — Trading Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- Top Bar -->
<header class="top-bar">
    <div class="top-bar-left">
        <span class="status-dot" id="statusDot"></span>
        <span class="bot-name">STUART</span>
        <span class="status-label" id="statusLabel">CONNECTING</span>
        <span class="ws-badge" id="wsBadge">●</span>
    </div>
    <div class="top-bar-right">
        <button class="kill-btn" id="killBtn">⏻</button>
    </div>
</header>

<!-- Stats Row -->
<div class="stats-row">
    <div class="stat-card accent">
        <span class="stat-label">Total Portfolio</span>
        <span class="stat-value mono" id="totalPortfolio">—</span>
    </div>
    <div class="stat-card">
        <span class="stat-label">Positions</span>
        <span class="stat-value mono" id="bankroll">—</span>
    </div>
    <div class="stat-card">
        <span class="stat-label">Cash</span>
        <span class="stat-value mono" id="cashBalance">—</span>
    </div>
    <div class="stat-card">
        <span class="stat-label">Unrealized P&L</span>
        <span class="stat-value mono" id="pnlTotal">—</span>
    </div>
    <div class="stat-card">
        <span class="stat-label">Realized P&L</span>
        <span class="stat-value mono" id="realizedPnl">—</span>
    </div>
    <div class="stat-card">
        <span class="stat-label">Total P&L</span>
        <span class="stat-value mono" id="totalPnl">—</span>
    </div>
</div>

<!-- Positions Grid (always visible, no scroll) -->
<section class="section">
    <h2 class="section-title">Active Positions</h2>
    <div id="positions" class="positions-grid"></div>
</section>

<!-- P&L Chart -->
<section class="section">
    <div class="section-header">
        <h2 class="section-title">P&L</h2>
        <div class="time-selector">
            <button class="time-btn active" data-range="1h">1H</button>
            <button class="time-btn" data-range="24h">24H</button>
            <button class="time-btn" data-range="7d">7D</button>
            <button class="time-btn" data-range="all">ALL</button>
        </div>
    </div>
    <div class="chart-wrap">
        <canvas id="pnlChart"></canvas>
    </div>
</section>

<!-- Trade Ledger: Full history -->
<section class="section">
    <div class="section-header">
        <h2 class="section-title">Trade Ledger</h2>
        <div class="time-selector">
            <button class="ledger-tab active" data-tab="open">Open</button>
            <button class="ledger-tab" data-tab="closed">Closed</button>
            <button class="ledger-tab" data-tab="log">Trade Log</button>
        </div>
    </div>
    <div class="table-wrap">
        <table>
            <thead id="ledgerHead">
                <tr>
                    <th>Market</th>
                    <th class="r">Side</th>
                    <th class="r">Size</th>
                    <th class="r">Entry</th>
                    <th class="r">Current</th>
                    <th class="r">P&L</th>
                </tr>
            </thead>
            <tbody id="ledgerBody"></tbody>
        </table>
    </div>
</section>

<!-- Two Column: Orders + Strategies -->
<div class="two-col">
    <section class="section">
        <h2 class="section-title">Open Orders</h2>
        <div id="orders" class="section-body"></div>
    </section>
    <section class="section">
        <h2 class="section-title">Strategies</h2>
        <div id="strategies" class="section-body"></div>
    </section>
</div>

<!-- Stuart's Log -->
<section class="section log-section">
    <div class="section-header log-header" id="logToggle">
        <h2 class="section-title">Stuart's Log</h2>
        <span class="log-chevron" id="logChevron">▾</span>
    </div>
    <div id="logBody" class="log-body">
        <div id="logEntries" class="log-entries"></div>
    </div>
</section>

<!-- Activity Feed -->
<section class="section activity-section">
    <div class="section-header">
        <h2 class="section-title">Live Activity</h2>
    </div>
    <div id="activityFeed" class="activity-feed"></div>
</section>

<!-- Connecting Overlay -->
<div class="connecting-overlay" id="connectingOverlay">
    <div class="connecting-spinner"></div>
    <div class="connecting-text">Connecting to live feed...</div>
</div>

<script src="app.js"></script>
</body>
</html>
