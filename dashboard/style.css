/* ── Reset & Base ── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0a0a0f;--card:rgba(255,255,255,.03);--border:rgba(255,255,255,.06);
  --text:#e0e0e0;--dim:#666;--green:#00ff88;--red:#ff4444;--yellow:#ffaa00;
  --font-sans:'Inter',system-ui,sans-serif;--font-mono:'JetBrains Mono',monospace;
}
html{font-size:14px}
body{background:var(--bg);color:var(--text);font-family:var(--font-sans);min-height:100vh;padding:0 16px 16px}
.mono{font-family:var(--font-mono)}
.green{color:var(--green)}.red{color:var(--red)}.dim{color:var(--dim)}
.r{text-align:right}
h2{font-size:.85rem;font-weight:600;text-transform:uppercase;letter-spacing:.08em;color:var(--dim)}

/* ── Top Bar ── */
.top-bar{
  display:flex;align-items:center;justify-content:space-between;gap:24px;
  padding:12px 0;border-bottom:1px solid var(--border);position:sticky;top:0;
  background:var(--bg);z-index:100;flex-wrap:wrap;
}
.bot-name{display:flex;align-items:center;gap:10px}
.bot-name .name{font-family:var(--font-mono);font-size:1.4rem;font-weight:700;letter-spacing:.12em}
.status-dot{
  width:10px;height:10px;border-radius:50%;background:var(--dim);flex-shrink:0;
}
.status-dot.active{background:var(--green);box-shadow:0 0 8px var(--green);animation:pulse 2s infinite}
.status-dot.halted{background:var(--red);box-shadow:0 0 8px var(--red)}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
.status-label{font-size:.7rem;font-weight:600;letter-spacing:.1em;color:var(--dim);padding:2px 8px;border:1px solid var(--border);border-radius:4px}

.top-bar-stats{display:flex;gap:32px;flex-wrap:wrap}
.stat{display:flex;flex-direction:column;gap:2px}
.stat-label{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;color:var(--dim)}
.stat-value{font-size:1.1rem;font-weight:600}

.kill-btn{
  background:transparent;color:var(--red);border:1px solid var(--red);
  padding:8px 20px;border-radius:6px;font-family:var(--font-mono);font-size:.8rem;
  font-weight:700;cursor:pointer;letter-spacing:.06em;transition:all .15s;
}
.kill-btn:hover{background:var(--red);color:#000}
.kill-btn.confirm{animation:flash .5s infinite;background:var(--red);color:#000}
@keyframes flash{50%{opacity:.5}}

/* ── Grid ── */
.grid{display:grid;grid-template-columns:3fr 2fr;gap:16px;margin-top:16px}
@media(max-width:1024px){.grid{grid-template-columns:1fr}}

/* ── Card ── */
.card{
  background:var(--card);border:1px solid var(--border);border-radius:12px;
  backdrop-filter:blur(12px);overflow:hidden;
}
.card-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid var(--border)}
.card-body{padding:12px 18px}
.card-body.scroll{max-height:280px;overflow-y:auto}

/* ── Chart ── */
.chart-wrap{padding:8px 12px 12px;height:280px}

/* ── Time Selector ── */
.time-selector{display:flex;gap:4px}
.time-btn{
  background:transparent;color:var(--dim);border:1px solid var(--border);
  padding:4px 12px;border-radius:4px;font-size:.7rem;font-family:var(--font-mono);
  cursor:pointer;font-weight:600;transition:all .15s;
}
.time-btn.active,.time-btn:hover{color:var(--green);border-color:var(--green)}

/* ── Table ── */
.table-wrap{overflow-x:auto;max-height:300px;overflow-y:auto}
table{width:100%;border-collapse:collapse;font-size:.8rem}
thead{position:sticky;top:0;background:rgba(10,10,15,.95)}
th{padding:10px 12px;text-align:left;color:var(--dim);font-weight:600;font-size:.7rem;text-transform:uppercase;letter-spacing:.06em;border-bottom:1px solid var(--border)}
td{padding:8px 12px;border-bottom:1px solid var(--border);font-family:var(--font-mono);font-size:.78rem;white-space:nowrap}
tr.win td:last-child{color:var(--green)}
tr.loss td:last-child{color:var(--red)}
td .side-buy{color:var(--green)}
td .side-sell{color:var(--red)}

/* ── Positions ── */
.position-card{
  padding:12px;border:1px solid var(--border);border-radius:8px;margin-bottom:8px;
  display:grid;grid-template-columns:1fr auto;gap:6px 16px;
}
.position-card .market{font-size:.82rem;font-weight:500;grid-column:1/-1}
.position-card .detail{font-size:.75rem;font-family:var(--font-mono);color:var(--dim)}
.position-card .detail span{color:var(--text)}
.position-card .upnl{font-family:var(--font-mono);font-weight:600;font-size:.85rem;text-align:right}

/* ── Strategies ── */
.strategy-card{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 12px;border:1px solid var(--border);border-radius:8px;margin-bottom:8px;
}
.strategy-card .name{font-weight:600;font-size:.82rem}
.strategy-card .stats{display:flex;gap:16px;font-family:var(--font-mono);font-size:.75rem;color:var(--dim)}
.strategy-card .stats span{color:var(--text)}
.toggle{
  width:36px;height:20px;border-radius:10px;background:var(--border);position:relative;
  cursor:pointer;flex-shrink:0;transition:background .2s;
}
.toggle.on{background:var(--green)}
.toggle::after{
  content:'';position:absolute;top:2px;left:2px;width:16px;height:16px;
  border-radius:50%;background:#fff;transition:transform .2s;
}
.toggle.on::after{transform:translateX(16px)}

/* ── Orders ── */
.order-row{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 12px;border:1px solid var(--border);border-radius:8px;margin-bottom:6px;
  font-size:.78rem;
}
.order-row .info{font-family:var(--font-mono);display:flex;gap:12px;flex-wrap:wrap}
.cancel-btn{
  background:transparent;color:var(--red);border:1px solid rgba(255,68,68,.3);
  padding:3px 10px;border-radius:4px;font-size:.7rem;cursor:pointer;font-family:var(--font-mono);
  transition:all .15s;
}
.cancel-btn:hover{background:var(--red);color:#000}

/* ── Activity Feed ── */
.activity-card{margin-top:16px}
.activity-feed{
  height:160px;overflow-y:auto;padding:10px 18px;font-family:var(--font-mono);
  font-size:.75rem;line-height:1.7;
}
.activity-feed .entry{opacity:.8}
.activity-feed .entry .ts{color:var(--dim);margin-right:8px}
.activity-feed .entry.trade{color:var(--green)}
.activity-feed .entry.alert{color:var(--yellow)}
.activity-feed .entry.error{color:var(--red)}
.ws-badge{font-size:.6rem;color:var(--dim)}
.ws-badge.connected{color:var(--green)}

/* ── Empty State ── */
.empty{color:var(--dim);font-size:.8rem;padding:24px 0;text-align:center}

/* ── Loading Skeleton ── */
.skeleton{
  background:linear-gradient(90deg,rgba(255,255,255,.03) 25%,rgba(255,255,255,.06) 50%,rgba(255,255,255,.03) 75%);
  background-size:200% 100%;animation:shimmer 1.5s ease-in-out infinite;
  border-radius:4px;color:transparent!important;user-select:none;
}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
.skeleton-line{height:14px;margin:6px 0;border-radius:4px}
.skeleton-card{padding:12px;border:1px solid var(--border);border-radius:8px;margin-bottom:8px}
.skeleton-card .skeleton-line:first-child{width:60%}
.skeleton-card .skeleton-line:nth-child(2){width:80%}
.skeleton-card .skeleton-line:nth-child(3){width:40%}

/* ── Value Transitions ── */
.stat-value,.upnl,.position-card .detail span{
  transition:color .3s ease,opacity .2s ease;
}

/* ── Price Flash ── */
@keyframes flash-green{0%{background:rgba(0,255,136,.15)}100%{background:transparent}}
@keyframes flash-red{0%{background:rgba(255,68,68,.15)}100%{background:transparent}}
.flash-up{animation:flash-green .6s ease-out}
.flash-down{animation:flash-red .6s ease-out}

/* ── Position Card Smooth ── */
.position-card{transition:border-color .3s ease,box-shadow .3s ease}
.position-card.positive{border-color:rgba(0,255,136,.15)}
.position-card.negative{border-color:rgba(255,68,68,.15)}

/* ── Connecting Overlay ── */
.connecting-overlay{
  position:fixed;top:0;left:0;right:0;bottom:0;z-index:200;
  background:rgba(10,10,15,.85);backdrop-filter:blur(8px);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:16px;transition:opacity .5s ease;
}
.connecting-overlay.hidden{opacity:0;pointer-events:none}
.connecting-spinner{
  width:32px;height:32px;border:3px solid var(--border);
  border-top-color:var(--green);border-radius:50%;
  animation:spin .8s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
.connecting-text{font-family:var(--font-mono);font-size:.85rem;color:var(--dim);letter-spacing:.06em}

/* ── Smooth number update ── */
.value-updating{opacity:.6;transition:opacity .1s}
.value-updated{opacity:1;transition:opacity .3s}

/* ── Scrollbar ── */
::-webkit-scrollbar{width:4px;height:4px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.12)}
