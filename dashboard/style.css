/* ── Reset & Base ── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0a0a0f;--card:rgba(255,255,255,.03);--border:rgba(255,255,255,.06);
  --text:#e0e0e0;--dim:#666;--green:#00ff88;--red:#ff4444;--yellow:#ffaa00;
  --font-sans:'Inter',system-ui,sans-serif;--font-mono:'JetBrains Mono',monospace;
  --radius:10px;--gap:12px;
}
html{font-size:14px}
body{background:var(--bg);color:var(--text);font-family:var(--font-sans);min-height:100vh;padding:var(--gap);max-width:1400px;margin:0 auto}
.mono{font-family:var(--font-mono)}
.green{color:var(--green)}.red{color:var(--red)}.dim{color:var(--dim)}
.r{text-align:right}

/* ── Top Bar ── */
.top-bar{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 0;border-bottom:1px solid var(--border);margin-bottom:var(--gap);
  position:sticky;top:0;background:var(--bg);z-index:100;
}
.top-bar-left{display:flex;align-items:center;gap:8px}
.bot-name{font-family:var(--font-mono);font-size:1.2rem;font-weight:700;letter-spacing:.1em}
.status-dot{width:8px;height:8px;border-radius:50%;background:var(--dim);flex-shrink:0}
.status-dot.active{background:var(--green);box-shadow:0 0 6px var(--green);animation:pulse 2s infinite}
.status-dot.halted{background:var(--red);box-shadow:0 0 6px var(--red)}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
.status-label{font-size:.6rem;font-weight:600;letter-spacing:.08em;color:var(--dim);padding:2px 6px;border:1px solid var(--border);border-radius:3px}
.ws-badge{font-size:.55rem;color:var(--dim)}
.ws-badge.connected{color:var(--green)}
.kill-btn{
  background:transparent;color:var(--red);border:1px solid rgba(255,68,68,.3);
  width:32px;height:32px;border-radius:6px;font-size:.9rem;cursor:pointer;
  display:flex;align-items:center;justify-content:center;transition:all .15s;
}
.kill-btn:hover{background:var(--red);color:#000}
.kill-btn.confirm{animation:flash .5s infinite;background:var(--red);color:#000}
@keyframes flash{50%{opacity:.5}}

/* ── Stats Row ── */
.stats-row{
  display:grid;grid-template-columns:repeat(4,1fr);gap:var(--gap);margin-bottom:var(--gap);
}
.stat-card{
  background:var(--card);border:1px solid var(--border);border-radius:var(--radius);
  padding:12px 14px;display:flex;flex-direction:column;gap:4px;
}
.stat-card.accent{border-color:rgba(0,255,136,.15)}
.stat-label{font-size:.6rem;text-transform:uppercase;letter-spacing:.1em;color:var(--dim);font-weight:600}
.stat-value{font-size:1.05rem;font-weight:600}

/* ── Section ── */
.section{
  background:var(--card);border:1px solid var(--border);border-radius:var(--radius);
  margin-bottom:var(--gap);overflow:hidden;
}
.section-title{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.08em;color:var(--dim);padding:12px 14px;border-bottom:1px solid var(--border)}
.section-header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border)}
.section-header .section-title{padding:0;border:0}
.section-body{padding:10px 14px}

/* ── Positions Grid (NO scroll, always visible) ── */
.positions-grid{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1px;
  background:var(--border);
}
.pos-card{
  background:var(--bg);padding:14px;display:flex;flex-direction:column;gap:6px;
  transition:background .3s;
}
.pos-card.positive{border-left:2px solid var(--green)}
.pos-card.negative{border-left:2px solid var(--red)}
.pos-card.flat{border-left:2px solid var(--dim)}
.pos-header{display:flex;justify-content:space-between;align-items:flex-start;gap:8px}
.pos-market{font-size:.8rem;font-weight:600;line-height:1.2}
.pos-pnl{font-family:var(--font-mono);font-weight:700;font-size:.85rem;white-space:nowrap}
.pos-details{display:flex;flex-wrap:wrap;gap:4px 12px;font-family:var(--font-mono);font-size:.7rem;color:var(--dim)}
.pos-details span{color:var(--text)}
.pos-price-row{display:flex;align-items:center;gap:6px;font-family:var(--font-mono);font-size:.72rem}
.pos-arrow{color:var(--dim)}
.pos-live{font-weight:600}

/* ── Chart ── */
.chart-wrap{padding:8px 12px 12px;height:220px}
.time-selector{display:flex;gap:3px}
.time-btn{
  background:transparent;color:var(--dim);border:1px solid var(--border);
  padding:3px 10px;border-radius:3px;font-size:.65rem;font-family:var(--font-mono);
  cursor:pointer;font-weight:600;transition:all .15s;
}
.time-btn.active,.time-btn:hover{color:var(--green);border-color:var(--green)}

/* ── Two Column Layout ── */
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:var(--gap)}
.stacked{display:flex;flex-direction:column;gap:var(--gap)}
.stacked .section{margin-bottom:0}

/* ── Table ── */
.table-wrap{overflow-x:auto;max-height:260px;overflow-y:auto}
table{width:100%;border-collapse:collapse;font-size:.75rem}
thead{position:sticky;top:0;background:rgba(10,10,15,.95)}
th{padding:8px 12px;text-align:left;color:var(--dim);font-weight:600;font-size:.65rem;text-transform:uppercase;letter-spacing:.06em;border-bottom:1px solid var(--border)}
td{padding:7px 12px;border-bottom:1px solid var(--border);font-family:var(--font-mono);font-size:.72rem;white-space:nowrap}
td .side-buy{color:var(--green)}
td .side-sell{color:var(--red)}
.open-badge{color:var(--dim);font-size:.65rem;font-weight:600;letter-spacing:.05em}

/* ── Orders ── */
.order-row{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 0;border-bottom:1px solid var(--border);font-size:.72rem;
}
.order-row:last-child{border-bottom:0}
.order-row .info{font-family:var(--font-mono);display:flex;gap:10px;flex-wrap:wrap}

/* ── Strategy ── */
.strategy-card{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 0;border-bottom:1px solid var(--border);
}
.strategy-card:last-child{border-bottom:0}
.strategy-card .name{font-weight:600;font-size:.78rem}
.strategy-card .stats{display:flex;gap:12px;font-family:var(--font-mono);font-size:.7rem;color:var(--dim)}
.strategy-card .stats span{color:var(--text)}

/* ── Activity Feed ── */
.activity-section{margin-bottom:0}
.activity-feed{
  height:120px;overflow-y:auto;padding:10px 14px;font-family:var(--font-mono);
  font-size:.7rem;line-height:1.7;
}
.activity-feed .entry{opacity:.8}
.activity-feed .entry .ts{color:var(--dim);margin-right:6px}
.activity-feed .entry.trade{color:var(--green)}
.activity-feed .entry.alert{color:var(--yellow)}
.activity-feed .entry.error{color:var(--red)}

/* ── Empty State ── */
.empty{color:var(--dim);font-size:.75rem;padding:20px 0;text-align:center}

/* ── Loading ── */
.skeleton{
  background:linear-gradient(90deg,rgba(255,255,255,.03) 25%,rgba(255,255,255,.06) 50%,rgba(255,255,255,.03) 75%);
  background-size:200% 100%;animation:shimmer 1.5s ease-in-out infinite;border-radius:4px;
}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
.skeleton-line{height:12px;margin:5px 0;border-radius:3px}
.skeleton-card{padding:14px;background:var(--bg)}

/* ── Connecting Overlay ── */
.connecting-overlay{
  position:fixed;top:0;left:0;right:0;bottom:0;z-index:200;
  background:rgba(10,10,15,.85);backdrop-filter:blur(8px);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:12px;transition:opacity .5s ease;
}
.connecting-overlay.hidden{opacity:0;pointer-events:none}
.connecting-spinner{
  width:28px;height:28px;border:2px solid var(--border);
  border-top-color:var(--green);border-radius:50%;animation:spin .8s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
.connecting-text{font-family:var(--font-mono);font-size:.8rem;color:var(--dim);letter-spacing:.05em}

/* ── Flash ── */
@keyframes flash-green{0%{background:rgba(0,255,136,.08)}100%{background:var(--bg)}}
@keyframes flash-red{0%{background:rgba(255,68,68,.08)}100%{background:var(--bg)}}
.flash-up{animation:flash-green .6s ease-out}
.flash-down{animation:flash-red .6s ease-out}

/* ── Transitions ── */
.stat-value,.pos-pnl,.pos-live{transition:color .3s ease}

/* ── Scrollbar ── */
::-webkit-scrollbar{width:3px;height:3px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}

/* ══════════════════════════════════
   MOBILE (< 768px)
   ══════════════════════════════════ */
@media(max-width:768px){
  html{font-size:13px}
  body{padding:8px}
  :root{--gap:8px}
  
  .stats-row{grid-template-columns:repeat(2,1fr)}
  .stat-card{padding:10px 12px}
  .stat-value{font-size:.95rem}
  
  .positions-grid{grid-template-columns:1fr 1fr}
  .pos-card{padding:10px}
  .pos-market{font-size:.72rem}
  .pos-pnl{font-size:.78rem}
  .pos-details{font-size:.62rem}
  
  .two-col{grid-template-columns:1fr}
  
  .chart-wrap{height:180px}
  .activity-feed{height:100px}
  
  .bot-name{font-size:1rem}
}

@media(max-width:480px){
  .positions-grid{grid-template-columns:1fr}
  .stats-row{grid-template-columns:repeat(2,1fr)}
  .pos-card{flex-direction:row;flex-wrap:wrap;align-items:center;padding:10px 12px}
  .pos-header{flex:1;min-width:0}
  .pos-details{width:100%}
}
